---
title: Хранилища Данных
author: Дата Инженеръ
date: 2023-06-04
category: hard-skills
layout: post
cover: ../assets/surf2.svg
---

Хранилище данных (аналитическое хранилище данных) - комплексная система для централизованного хранения, обработки и анализа большого объема данных, что позволяет организациям принимать обоснованные решения на основе данных (data-driven подход).

# Базовая архитектура хранилищ данных

Если рассмотреть самую упрощенную архитектуру DWH, она будет содержать несколько компонентов:

1. **Системы источники данных**

- транзакционные базы данных (например, база данных CRM-системы)
- приложения и системы, отправляющие данные с помощью программных интерфейсов (API) (например, API рекламных кабинетов: Яндекс.Метрика и т.п.)
- внешние открытые данные (пример: данные о курсе валют с открытого ресурса, забираемые парсингом или через API)
- файлы и документы (пример: папки с excel файлами в google drive или таблицы google sheets)

Источников данных может быть огромное множество. Чтобы эти данные попали в аналитическое хранилище, нужно построить *data pipeline* (поток данных). Можно провести аналогию с трубопроводом: 

ключи и подземные источники ➔ строим трубопровод, отчистительные сооружения ➔ вода попадает потребителям

Тоже самое с данными, где ключи воды - источники данных. чтобы данные попали из источников в DWH нужны папйплайны (трубы) и механизмы выгрузки/загрузки/трансформации данных.

2. **Потоки данных (ETL/ELT)**

ETL-процесс - процесс извлечения (extract), трансформации и преобразования (transform), загрузки (load) данных из системы источника в DWH. Более детально про подходы ETL/ELT и инструменты будет расписано в разделе *ETL/ELT (Batch)*.

![Схема ETL процесса](/assets/etlschema.png)

3. **Хранение данных**

Хранилище данных включает в ключевой компоннент - само хранилище. В качестве хранилища могут использоваться различные аналитические базы данных и платформы для хранения данных. Например, Greenplum, Clickhouse, Snowflake, Amazon Redshift, Google BigQuery и др. Решение для хранения данных выполняет несколько функций: 
- обеспечение надежного хранения большого объема данных
- предоставление доступа к данным на чтение/редактирование/удаление/вставку согласно ролевой модели и правам доступа пользователей
- обеспечение вычислительных ресурсов и возможностей для аналитики над данными

В хранилищах данные принято хранить на разных слоях (layers). В самом базовом сценарии обычно выдаляют 3 слоя:
- raw layer - необработанные данные, которые попали из источника
- core layer - слой обработанных данных, стандартизированных для хранения внутри сущностей хранилища
- business layer - подготовленные данные для отчетности или более детальной аналитики пользователями, витрины данных (*data marts*)

На практике каждая компания сама выбирает конфигурацию хранилища и слоев данных, которая подходит под требования и ключевые задачи конкретного бизнеса. 

4. **BI-решения**

Слой BI необходим для предоставления результатов анализа данных и донесение его до бизнес-пользователей, проведенного на основе данных из хранилища. Бизнесу нужны оцифрованные метрики в удобных для принятия решений формах: интерактивных отчетах (дашбордах), информативных визуальных графиках или презентациях от аналитиков, других формах отчетов (например сообщениях в мессенджеры с ключевой информацией о метриках). 
Для реализации данных задач в архитектуру хранилища данных закладывают использование BI-инструментов, таких как Tableau, Power BI, Apache Superset, Datalens и других.
Все BI инструменты имеют функционал подключения к хранилищу данных, что позволяет удобно и быстро использовать данные из хранилища для построения аналитической отчетности.


# Разнообразие архитектур хранилищ данных 

Существует разные подходы к пострению хранилищ данных. Это обсуловлено множеством факторов:
- различные форматы данных для хранения и обработки (структурированные и неструктурированные)
- разные задачи анализа данных (описательная BI-отчетность и/или обучение ML моделей в разных областях CV, NLP)
- разные ресурсы, масштабы, корпоративные подходы и экспертиза компаний, внедряющих аналитические хранилища в свой бизнес

Исходя из этих факторов есть разные архитектурные подходы хранилищ данных

## Data Warehouse 

Это централизованное хранилище, предназначенное для хранения и анализа в большей степени структурированных данных. Оно оптимизировано для выполнения сложных аналитических запросов на языке SQL и построения BI-отчетности для бизнес-пользователей.

**Примеры:** Snowflake, Amazon Redshift, Google BigQuery, Greenplum, Clickhouse

**Ресурсы:**
- [Архитектура хранилищ данных](https://habr.com/ru/articles/441538/)
- 

## Data Lake

## Data Lakehouse 

## Data Mesh 

## Data Fabric


# OLAP vs OLTP системы или почему База данных != Хранилище данных

